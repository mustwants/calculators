# Environment Configuration

This file documents the different deployment environments for the VetMover application.

## üåç Environment Overview

### Production Environment
- **URL**: https://vetmover.com
- **Branch**: `main`
- **Purpose**: Live site for end users
- **Analytics**: Full tracking enabled
- **SEO**: Complete optimization active

### Staging Environment
- **URL**: https://staging--vetmover.netlify.app
- **Branch**: `staging`
- **Purpose**: Pre-production testing and QA
- **Analytics**: Staging environment tracking
- **SEO**: Disabled (noindex, nofollow)

### Deploy Preview Environment
- **URL Pattern**: https://deploy-preview-[PR#]--vetmover.netlify.app
- **Trigger**: Pull requests to main branch
- **Purpose**: Feature review and testing
- **Analytics**: Minimal tracking
- **SEO**: Disabled (noindex, nofollow)

### Branch Deploy Environment
- **URL Pattern**: https://[branch-name]--vetmover.netlify.app
- **Trigger**: Pushes to configured branches
- **Purpose**: Feature development and testing
- **Analytics**: Development tracking only
- **SEO**: Disabled (noindex, nofollow)

## üîß Configuration Variables

### Production (`main` branch)
```bash
NODE_ENV=production
VITE_APP_ENV=production
VITE_SITE_URL=https://vetmover.com
VITE_CANONICAL_URL=https://vetmover.com
```

### Staging (`staging` branch)
```bash
NODE_ENV=staging
VITE_APP_ENV=staging
VITE_SITE_URL=https://staging--vetmover.netlify.app
VITE_CANONICAL_URL=https://vetmover.com
```

### Deploy Preview (Pull Requests)
```bash
NODE_ENV=preview
VITE_APP_ENV=preview
VITE_SITE_URL=https://deploy-preview-[PR#]--vetmover.netlify.app
VITE_CANONICAL_URL=https://vetmover.com
```

### Branch Deploy (Feature Branches)
```bash
NODE_ENV=development
VITE_APP_ENV=development
VITE_SITE_URL=https://[branch-name]--vetmover.netlify.app
VITE_CANONICAL_URL=https://vetmover.com
```

## üöÄ Deployment Workflow

### 1. Feature Development
```bash
# Create feature branch
git checkout main
git pull origin main
git checkout -b feature/new-calculator

# Make changes and commit
git add .
git commit -m "Add new calculator feature"
git push origin feature/new-calculator

# Branch will be available at:
# https://feature-new-calculator--vetmover.netlify.app
```

### 2. Pull Request & Review
```bash
# Create pull request on GitHub
# Deploy preview automatically created at:
# https://deploy-preview-[PR#]--vetmover.netlify.app
```

### 3. Staging Deployment
```bash
# After PR approval, merge to staging
git checkout staging
git pull origin staging
git merge feature/new-calculator
git push origin staging

# Staging deployment at:
# https://staging--vetmover.netlify.app
```

### 4. Production Release
```bash
# After QA approval, merge to production
git checkout main
git pull origin main
git merge staging
git push origin main

# Production deployment at:
# https://vetmover.com
```

## üìä Environment-Specific Features

### SEO & Analytics Configuration

#### Production
- Full Google Analytics tracking
- Complete SEO meta tags
- Sitemap and robots.txt enabled
- Social media integration active

#### Staging
- Limited analytics (staging property)
- SEO disabled with noindex meta tag
- Basic monitoring for performance testing
- Social media sharing disabled

#### Deploy Preview
- Analytics disabled or minimal
- SEO completely disabled
- No social media integration
- Basic error tracking only

#### Branch Deploy
- Development analytics only
- SEO disabled
- Debug mode enabled
- Console logging active

### Security Headers by Environment

All environments include basic security headers, but production has additional hardening:

#### Production
- Strict Transport Security (HSTS)
- Content Security Policy (CSP)
- X-Frame-Options: DENY
- X-Content-Type-Options: nosniff

#### Non-Production
- Basic security headers
- Less restrictive CSP for development
- Debug-friendly configuration

## üîç Testing & Quality Assurance

### Environment-Specific Testing

#### Staging Environment
- **Purpose**: Final QA before production
- **Duration**: Features tested for 24-48 hours
- **Checklist**: 
  - All calculators functional
  - SEO tags properly disabled
  - Performance within acceptable limits
  - Mobile responsiveness verified

#### Deploy Preview
- **Purpose**: Feature-specific testing
- **Duration**: During PR review process
- **Checklist**:
  - Feature works as expected
  - No breaking changes to existing features
  - Code review completed
  - Accessible and responsive

#### Branch Deploy
- **Purpose**: Development and experimental features
- **Duration**: Throughout development cycle
- **Checklist**:
  - Feature development progress
  - Initial functionality testing
  - Integration with existing codebase

## üéØ URL Structure Examples

### Current Deployments Available

#### Production
- **Primary**: https://vetmover.com
- **Backup**: https://vetmover.netlify.app

#### Staging (New)
- **URL**: https://staging--vetmover.netlify.app
- **Status**: Ready for configuration in Netlify dashboard

#### Future Deploy Previews
- **Pattern**: https://deploy-preview-1--vetmover.netlify.app
- **Example**: https://deploy-preview-42--vetmover.netlify.app

#### Future Branch Deploys
- **Development**: https://development--vetmover.netlify.app
- **Feature Example**: https://feature-seo-updates--vetmover.netlify.app
- **Hotfix Example**: https://hotfix-calculator-bug--vetmover.netlify.app

## üö® Troubleshooting

### Common Issues and Solutions

#### Branch Deploy Not Working
1. Check if branch deploys are enabled in Netlify dashboard
2. Verify branch name doesn't contain special characters
3. Ensure build command succeeds for the branch

#### Deploy Preview Not Created
1. Verify pull request is targeting the correct branch (main)
2. Check if deploy previews are enabled in site settings
3. Ensure there are no build failures

#### Environment Variables Not Applied
1. Check context-specific environment variables in Netlify
2. Verify `netlify.toml` configuration is correct
3. Ensure variables are accessible in the build process

### Monitoring and Alerts

#### Production Monitoring
- **Uptime monitoring** via Netlify
- **Performance monitoring** via Core Web Vitals
- **Error tracking** via browser console monitoring

#### Staging Monitoring
- **Build success/failure alerts**
- **Basic performance monitoring**
- **Integration testing results**

## üìû Support and Contacts

### Netlify Dashboard Access
- **Site**: vetmover.netlify.app
- **Team**: MustWants organization
- **Admin**: Site administrators can configure deploy contexts

### GitHub Repository
- **Repository**: https://github.com/mustwants/calculators
- **Branch Strategy**: GitFlow with staging integration
- **PR Process**: Feature branches ‚Üí Staging ‚Üí Main

For questions about deploy subdomain configuration, refer to the Netlify documentation or the site administrator.